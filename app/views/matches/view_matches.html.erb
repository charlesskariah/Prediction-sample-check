
<%
   if current_user.has_joined_league params[:round_id]
  link_to_text = "Predict"
  link_to_url  = ""
   else
    link_to_text = "Join to Predict"
    link_to_url = ""
   end
%>
<% round_id = params[:round_id] %>
<% round = Round.find(round_id) %>

  <div class='message'> <%= params[:notice] %> </div> <br />

<table class="table" border=0>
  <tr>
  <th align="left"><%= link_to "Previous Week", :controller => :matches , :action => :view_matches,
    :round_id => @league.upcoming_round.try(:previous_round).try(:id), :league_id => @league.id, 'data-no-turbolink' => true %></th>
  <th colspan=3><center><%= round.round_name %></center></th>
  <th align="right"><%= link_to "Next Week", :controller => :matches , :action => :view_matches,
    :round_id => @league.upcoming_round.try(:next_round).try(:id), :league_id => @league.id, 'data-no-turbolink' => true %></th>
  </tr>
  <% @matches.each do |match| %>
    <% prediction = match.user_prediction(current_user) || @prediction %>
    <%= form_for(prediction ) do |f| %>
      <%= hidden_field_tag(:round_id,  round_id) %>
      <%= f.hidden_field(:match_id, :value => match.id) %>
      <%= f.hidden_field(:selected_league_id , :value => @selected_league.id) %>
      <tr>
        <td class= "success" colspan=5>
          <i> <%= I18n.l match.match_date %> <%= I18n.l match.match_time %> </i>
        </td>
      </tr>
      <tr>
        <td>
          <%= match.club_1.club_name %>
        </td>
        <td>
          <%= f.number_field(:club1_predicted_score, {in: 0..20, step: 1}) %>
        </td>
        <td>
          <%= f.number_field(:club2_predicted_score, {in: 0..20, step: 1}) %>
        </td>
        <td>
          <%= match.club_2.club_name %>
        </td>
        <td>
          <%= f.submit %>
        </td>
      </tr>

  <% end %>
<% end %>
</table>
